
import ast
import os
import fitz
import openai
from dotenv import load_dotenv
load_dotenv()
key = os.getenv('openai_key')
openai.api_key = key


def extract_text_from_pdf(pdf_file):
    with fitz.open(pdf_file) as pdf_document:
        text = ""
        for page_num in range(pdf_document.page_count):
            page = pdf_document[page_num]
            text += page.get_text()
    return text


def generate_data_prompt(resume_text):
    # Save the extracted data
    prompt = """
    Write Knowledge with the same form.

    Input: "+212 648265022  - HTML / CSS / JAVASCRIPT  - Hackathon H-LSID : 2nd Place  < ENSET Mohammedia >  jarmouni.fst@uhp.ac.ma  linkedin.com/in  /badrjarmouni  EDUCATION  HACKATHONS    SKILLS  CONTACT  EXPERIENCE  Dadupa Consulting:      4 months (PFA)  << Social Network >>: Connecting project holders with  investors/mentors     ( ReactJs , Lumen ) - 2021/2022  INTERNSHIPS:  JARMOUNI  - ReactJS / NodeJS /ExpressJS  - PHP < Laravel,Lumen  >  - Mongodb / Firebase / MySQL  - Java < JEE , SpringBoot >  - Flutter  - Python < Flask >  - Swift / C / C++  - Hackathon HackTheFuture : 3rd Place  < ENSA Marrakech >    DEUST: Mathematics,Computer Science,Physics   < MIP >  2018 - 2020  LST (Bachelor 's Degree):  Computer Science Engineering  2020 - 2021  License en Sciences et Techniques   MST (Master's Degree):  Networks and Computer Systems  < RSI >  2021 - 2023  Master en Sciences et Techniques  FST SETTAT -  FST SETTAT -  FST SETTAT -  - SCRUM  National Innovation Comp\\\\u00e9tition for Entrepreneurship  IT cell member  EXTRACURRICULAR:  PROJECTS:  DroneWay: Planning optimal paths for drone deliveries          <Python, Flask, VueJS>  Design and creation of a desktop application for the  management of internships in companies <Java>  Creation of a remote control system for domestic devices    <Nodemcu>  Mobile Application (Quizz)   <Flutter, Firebase>  LANGUAGE SKILLS  English:  French:  Felicity Optics:      3 months (PFE)  Design and creation of an e-commerce website  for optics and eyewear   Laravel - 2020/2021  Design and creation of the platform ALTWAY that  automates the recruitment process (RH)           <SpringBoot, React>  Design and creation of NICE website National Innovation  Competition for Entrepreneurship - React , Django -  "
    Knowledge: ["SCRUM","PHP","Laravel","ReactJS","NodeJS","ExpressJS","HTML","CSS","JAVASCRIPT","Mongodb","Firebase","MySQL","JEE","SpringBoot","Flutter","Python","Swift","English","French","Networks and Computer Systems","Computer Science Engineering"]

    Input: "SKILLS  Languages: Arabic, French,   Anglais.   OS: Windows, UNIX.  Modeling & Databases UML,   SQL Server, Oracle, Firebase.  Electronic: Proteus ISIS &   ARES, Arduino, MPLAB.  Frontend: HTML, CSS,   Bootstrap, React JS, Angular,   Vue JS.  Programming   Languages  & Framework:   Flutter, Swift,   JAVA, JEE, Spring,   PHP, C/C++, Assembleur,   JavaScript, Node JS,   Python, Tensor Flow.  PARA-UNIVERSITY   ACTIVITIES & EXPERIENCES  NICE: Vice president  24th Promotion Award   Ceremony: Member of the   committee  GDSC UH1: Design Lead 21\\\\u2019   (Core team)  FST Settat 21\\\\u2019 integration   week: Media & design   manager  CTDE: Design manager  ENACTUS FST Settat , CLIC ,   JLM: Member  INTERESTS   Reading  chess  Design  Swimming  Certi\\\\ufb01cates  Udemy, Google AI, Coursera\\\\u2026    Certi\\\\ufb01cates (link)  EDUCATION  FACULTY OF SCIENCE AND TECHNOLOGY SETTAT - UH1 (FSTS)  \\\\u2794  Engineering Degree: Computer Engineering, option: software quality.  \\\\u2794  University degree in electrical engineering and mechanical engineering.  HIGHER TECHNICIAN CERTIFICATE CENTER SETTAT (BTS)   \\\\u2794  Higher technician diploma: Electronic Systems.  TECHNICAL QUALIFIER HIGH SCHOOL SETTAT (LQTS)  \\\\u2794  Baccalaureate: Science and electrical technology.  PROFESSIONAL EXPERIENCES  Capgemini Engineering : Application Internship                   \\\\u2794  Creating an application to automate the generation of ALTIS/ISS monitoring   dashboards.  \\\\u2794  Technologies used: Python, SQLite  SMART CAR CONNECT: End of year Internship  \\\\u2794  Designing and developing the OTOMOTO marketplace (platform for the sale   of car spare parts).  \\\\u2794  Technologies used: React JS, Node JS  INTELLCAP: Application Internship                                         \\\\u2794  Developing algorithms for predicting and optimizing kerosene   consumption in aviation using AI.  \\\\u2794  Technologies used: Python, Deep learning  PROFESSIONAL PROJECTS  DroneWay (Optimization of drone routes): Vue.JS, Python, Flask, VRP  Cluedo game (Web): JEE, HTML, Bootstrap, JS, MySQL  Autodiam (Mobile App for RAC detection): FLutter, Python, \\\\ufb01rebase, Flask  Data Centre supervision (IOT): NodeRed, Node JS, Web sockets, C  Nerds (Mobile app for general knowledge in IT): FLutter, \\\\ufb01rebase, Python  Young PLASTE (youngplaste.me): UX, UI, CSS, JS  Data visualisation (Web): Oracle (PLSQL), Python, Flask, HTML, Tailwind CSS  Student management (Mobile): SWIFT, Core Data  Item management (Web): JEE, HTML, CSS  Chat App (Web client/serveur): C, Web sockets, JS, HTML  Management of internships in companies (Desktop): JAVA, SWING, MySQL  Recommendation system: Python, factor analysis (ACP, AFC)  Remote control (IOT): NODEMCU, HTTP, HTML, CSS  Smart home (IOT): Raspberry Pi, NODEMCU, NodeRed, MQTT  hotel management (Web):  v1.0 -> SQL Server (TSQL), C | v2.0 -> HTML, CSS, ASP, VB  COMPETITIONS & ACHIEVEMENTS  Program: Explorer Innovation Fund (UM6P & MIT Sandbox)                      Top 10 projects: Cluster Maintenance 4.0 at STARTGATE       3rd place: Hackathon HTF 2022 at ENSA Marrakech        Participation: Hult Prize Regional summit online at Lisbonne         2nd prize: Hackathon LSID 2022 at ENSET Mohammedia          Participation: Entrepreneur FAIR 2022 competition at ENSA Berrechid          1st prize: Hult Prize on campus 2022 at Cit\\\\u00e9 d\\\\u2019innovation UH1                1st prize: The pitch competition (5th Edition) at ENCG Settat                     Incubation program: U-founders at UM6P                                     Participation: Let\\\\u2019s challenge 6.0 at EST Beni-Mellal   Presentation of Hassan 1st University in the \\\\u201cFABLAB universitaire\\\\u201d at USMS  Mohamed LAHARRAF   Software engineering student  Mobile: +212 695 587 968  Address: Casablanca-Settat, Morocco  Email: mohamed.laharraf.work@gmail.com  LinkedIn: Mohamed LAHARRAF (link)  GitHub: github.com/mohamedlaharraf (link)  Portfolio: mohamedlaharraf.engineer      2018 - 2023   2020 - 2021   2017 - 2018  Casablanca, Aug. - Oct. 2022   RABAT, July - Sept. 2022  RABAT, July - Sept. 2021  Sept. 2022  July 2022  May 2022  May 2022  April 2022  April 2022  March 2022  March 2022  Feb - Sept. 2022  Nov. 2021  "
    Knowledge: ["Arabic","French","English","Windows","UNIX","UML","SQL Server","Oracle","Firebase","Flutter","Swift","JAVA","JEE","Spring","PHP","C/C++","Assembleur","JavaScript","Node JS","Python","Tensor Flow","Python","SQLite","React JS","Node JS","Engineering Degree","Computer Engineering","software quality","Electronic Systems"]

    Input: "Realization of a remote control system for domestic appliances  with Nodemcu   Creation of the website NICE National Innovation Competition   for Entrepreneurship  -  React ,  Django  -   2nd place hackathon H-LSID ENSET Mohammedia  linkedin.com/in/beraichimane/  Quiz : Mobile Application   -  Flutter , NodeJs  -  CERTIFICATIONS  English : Fluent  Arabic : Native  French :  TCF B2  LANGUAGES  EXPERIENCES  Internships  Para-academics:  Projects  Geo4net / Web Developer  ( 7 mois )  Smart Car Connect / Web Developer ( 2 mois )  Club BEEA / FST Settat  Club Ihssen / FST Settat  Design and construction of the platform KHASNI  to connect between a   service provider and a service requester -  Spring , Angular  -  Design and creation of a vehicle\\\\u2019s spare parts marketplace  Design and construction of the platform INTERVERSITY to connect  between students and companies  -  Spring , Angular  -  2018 - 2020  Hackathons  Treasurer   Head of Media Unit / Design cell member   DroneWay :  Planning of optimal routes for deliveries by an autonomous    drone  -  Flask, VueJs, Python  -   Design and production of a desktop application for the management of internships  in company  -  Java Swing  -    3rd place hackathon HTFH ENSA Marrakech  ( Juillet - Septembre ) 2022  Implementation of a real-time geolocation web application  and vehicle feet management   (  Juin  -  Decembre  ) 2021  2018 - 2019  HTML  / CSS  / JAVASCRIPT /  TYPE SCRIPT  C   /  C++  / SWIFT  PHP  /  JAVA    /  JAVA EE  /  SPRING    DART  /  FLUTTER    PYTHON / FLASK  /  DJANGO  HUAWEI : HCSA  STORAGE  GOOGLE : PROJECT MANAGEMENT  OPENCLASSROOMS: JAVA EE  ANGULAR / REACT JS     SKILLS  Master : Network and Computer systems  Hassan First  University I  FST Settat   LST : Computer Engineering   Hassan First  University I  FST Settat   Deust : Mathematics, Computer Science, Physics  Hassan First  University I  FST Settat   Baccalaureate : Physics  High school Tarik Ibnu Ziad I Meknes  EDUCATION  2021 - 2023  2020 - 2021  2017 - 2020  2016 - 2017   CONTACT  imaneberaich7@gmail.com  +212 708-038348  BERAICH Imane  Student in 2nd year Master RSI  "
    Knowledge: ["Network and Computer systems","Computer Engineering","English","French","Arabic","Flask","VueJs","Python","Spring","Angular","Nodemcu","Java","Swing","React","Django","Flutter","NodeJs","HTML","CSS","JAVASCRIPT","TYPE SCRIPT"]

    Input: "Engineer's degree in Software Engineering  FST Settat - Engineering Degree  2020-2023  University Diploma of Technology in Multi\\\\ufffd  media and Web Design  ENS T\\\\u00e9touan - DUT  2018-2020  Education  - DroneWay: Planning of optimal routes    for deliveries by an autonomous drone    (Flask, VueJs, Python).  - Intelligent patient monitoring system    (D jango,ML,Raspberry Pi).  - Cluedo: Multiplayer game (Spring,Web    Sockets).  - AjiTechri: E-commerce (Java EE).  - Movie recommendation system (Flask,    TensorFlow)  - Drowsiness detection (Raspberry,    Machine Learning).  - ...  Projects:  Club Enactus: Project Manager.  Club GDSC (Google Developer Student   Clubs):   Head   of   WEB   development   unit.                                     08/2021-08/2022  Para-academics:  Hirschmann   Automative:   program-   ming of an ERP web application using   php.                07/2019-08/2019 (2 months)  SHM: developed a web application   using Laravel for the management of   the different sectors of associations/   companies.  04/2020-07/2020 (4 months)  Luova Tech:  development of showcase   websites using Wordpress, and web   applications with Angular for different   clients.           08/2021-09/2021 (2 months)  Dadupa: creation of a platform for   connecting project holders and inves-   tors / business angels (React, Lumen   and Docker).     07/2022-09/2022 (3 months)  Internships:  Work experience  Hackathons  - 2nd place hackathon H-LSID    ENSET Mohammedia.  - 3rd place hackathon HTFH    ENSA Marrakech.  - 1st place hackathon BCG    Platinion (National and    International).  Certi\\\\ufb01cations  - Huawei: HCIA Cloud Computing  - Huawei: HCIA Big Data  - The Hong Kong University of     Science and Technology:     Angular  - Google: Project Management     Specialization  - OpenClassrooms: Java EE  - Scrimba: Frontend Developper     Career Path  - Google\\\\u2019s Qwiklabs: Cloud      Solutions  Skills  - HTML5 / CSS3 / JavaScript(ES6+)  - PHP (Laravel / Wordpress)  - Java (JEE, Spring)  - Python (Flask / D jango)  - Machine Learning (TensorFlow)  - Angular / React  - Firebase / MySQL  - Flutter / React Native  - Docker / Kubernetes  - JIRA  bouabidanas02@gmail.com  www.anasbouabid.com  linkedin.com/in/anas-bouabid  +212 645 23 77 40  ANAS BOUABID  5th year, Software Engineering  Student  "
    Knowledge: ["Software Engineering","Multi-media and Web Design","Flask","VueJs","Python","Django","ML","Raspberry Pi","Spring","Web Sockets","Java EE","TensorFlow","Enactus","Google Developer Student Clubs","PHP","Laravel","Angular","Wordpress","Docker","Lumen","HTML5","CSS3","JavaScript","ES6","JEE","Spring","Firebase","MySQL","Flutter","React Native","Kubernetes","JIRA","HCIA Cloud Computing","HCIA Big Data","Angular","Project Management","Java EE","Frontend Developer","Cloud Solutions"]

    Input: """ + resume_text.replace('\\\\n', '  ') + """
    Knowledge: """
    messages = [{"role": "system", "content": "you should behave like human resources specialist"},
                {"role": "system", "content": prompt}]

    response = openai.ChatCompletion.create(
        model="gpt-3.5-turbo-16k",
        messages=messages,


    )
    result = ast.literal_eval(response["choices"][0]["message"]["content"])
    return ",".join(result)


def main():

    # Get the path to the resume PDF and job description text file
    # resume_pdf_path = input("Enter the path to the resume PDF file: ")
    resume_text = extract_text_from_pdf(
        "C:\\Users\\bouta\\OneDrive\\Bureau\\hackathons\\nextGenAI\\data\\SalahEddine-BOUTAYEB_RESUME.pdf")
    extracted_data = generate_data_prompt(resume_text)
    print(extracted_data)


if __name__ == "__main__":
    main()
